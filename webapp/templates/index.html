{% extends "layout.html" %}
{%- import "components/search.html" as search -%}

{% block content %}
<section class="section">
    <div class="columns">
        <div class="column">
            <div class="content">
                <p>
                    This is a small website where you can find events in current FOSDEM (
                    <a href="https://fosdem.org/{{ current_fosdem.year }}/">{{ current_fosdem.year }}</a>) and
                    across the years. This is based on content search, and via <a href="/2026/event/7327/">related
                        events</a>.
                </p>
                {% if !summary.by_year.is_empty() %}
                <table class="table is-striped is-narrow is-hoverable is-fullwidth">
                    <thead>
                        <tr>
                            <th>Year</th>
                            <th>Events</th>
                            <th>Presenters</th>
                            <th>Rooms</th>
                            <th>Tracks</th>
                            <th>Videos</th>
                            <th>Slides</th>
                            <th>Links</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for (year, s) in summary.by_year.iter() %}
                        <tr>
                            <td><a href="/{{ year }}/timetable/">{{ year }}</a></td>
                            <td>{{ s.events }}</td>
                            <td>{{ s.people }}</td>
                            <td>{{ s.rooms }}</td>
                            <td>{{ s.tracks }}</td>
                            <td>{{ s.videos }} (~{{ s.video_duration.num_hours() }}h)</td>
                            <td>{{ s.slides }}</td>
                            <td>{{ s.links }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                {% endif %}
                <p>
                    <a href="https://www.houseofmoran.com">I (mike
                        moran)</a> originally wrote this back in 2024 because, whilst
                    I really enjoy attending FOSDEM, the amount of possible things to see is large,
                    and there is always a chance I can miss something.
                </p>
                <p>
                    The <a href="https://fosdem.org/{{ current_fosdem.year }}/">main website</a> does have search, but
                    only for literal
                    matches.
                    This site uses 'semantic search' in as much as it is based on embeddings.
                    One outcome is that you'll find results for queries here you won't find on main site
                    e.g. compare "controversial" on <a
                        href="https://fosdem.org/{{ current_fosdem.year }}/search/?q=controversial">main
                        site</a>
                    vs <a href="/search?q=controversial&limit=20&year={{ current_fosdem.year }}">here</a>.
                </p>
                <p>
                    See <a href="https://github.com/mikemoraned/fosdem">Github</a> for how this was built,
                    and also for any pending / done <a
                        href="https://github.com/mikemoraned/fosdem/blob/main/todos/">TODO's</a>.
                </p>
            </div>
        </div>
        <div class="column is-one-third">
            {% call search::form("", default_year, current_fosdem.selectable_years) %}
        </div>
    </div>
</section>

{% if !recent_posts.is_empty() %}
<section class="section">
    <div class="columns">
        <div class="column">
            <h2 class="title is-4">Recent News</h2>
            {% for post in recent_posts %}
            <div class="box">
                <a href="{{ post.url_path() }}"><strong>{{ post.title }}</strong></a>
                <br>
                <small>{{ post.date.format("%B %d, %Y") }}</small>
            </div>
            {% endfor %}
            <a href="/blog/">View all news</a>
        </div>
    </div>
</section>
{% endif %}
{% endblock %}